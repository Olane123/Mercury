<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neon Messenger PRO - Полная версия</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #00eeff;
            --secondary: #ff00ff;
            --accent: #00ffaa;
            --background: #0a0a15;
            --surface: #121225;
            --surface-light: #1a1a35;
            --text-primary: #ffffff;
            --text-secondary: #a0a0c0;
            --online: #00ff00;
            --unread: var(--accent);
            --hover: rgba(255, 255, 255, 0.1);
            --shadow: 0 0 15px rgba(0, 238, 255, 0.5);
            --neon-purple: #b967ff;
            --neon-blue: #00c2ff;
            --neon-pink: #ff2a6d;
            --neon-green: #00ff9d;
            --neon-yellow: #ffde59;
        }

        body {
            background: radial-gradient(circle at center, #170a2b, #0a0a15);
            color: var(--text-primary);
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            position: relative;
        }

        body::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(0, 238, 255, 0.1) 0%, transparent 40%),
                radial-gradient(circle at 80% 70%, rgba(255, 0, 255, 0.1) 0%, transparent 40%);
            z-index: -1;
        }

        /* Главная структура */
        .app-container {
            display: flex;
            width: 100%;
            height: 100%;
            overflow: hidden;
            box-shadow: 
                0 0 30px rgba(0, 238, 255, 0.3),
                0 0 60px rgba(255, 0, 255, 0.2);
            background: rgba(18, 18, 37, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(100, 100, 200, 0.2);
            position: relative;
            z-index: 1;
        }

        /* Боковая панель */
        .sidebar {
            width: 90px;
            background: linear-gradient(135deg, rgba(0, 238, 255, 0.1), rgba(255, 0, 255, 0.1));
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 30px 0 20px;
            z-index: 10;
            border-right: 1px solid rgba(100, 100, 200, 0.1);
        }

        .logo {
            font-size: 32px;
            margin-bottom: 50px;
            color: var(--primary);
            text-shadow: 0 0 10px var(--primary);
            animation: pulse 2s infinite alternate;
        }

        @keyframes pulse {
            from { text-shadow: 0 0 5px var(--primary); }
            to { text-shadow: 0 0 15px var(--primary), 0 0 20px var(--neon-blue); }
        }

        .nav-icon {
            width: 50px;
            height: 50px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 15px 0;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--text-secondary);
            font-size: 22px;
            background: rgba(30, 30, 50, 0.5);
            border: 1px solid rgba(100, 100, 200, 0.2);
        }

        .nav-icon:hover, .nav-icon.active {
            background: linear-gradient(135deg, rgba(0, 238, 255, 0.2), rgba(255, 0, 255, 0.2));
            color: white;
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(0, 238, 255, 0.3);
            border: 1px solid rgba(0, 238, 255, 0.3);
        }

        .nav-icon.active {
            color: var(--primary);
            text-shadow: 0 0 8px var(--primary);
        }

        /* Панель чатов */
        .chats-panel {
            width: 350px;
            background-color: rgba(18, 18, 37, 0.7);
            display: flex;
            flex-direction: column;
            border-right: 1px solid rgba(100, 100, 200, 0.1);
            position: relative;
            overflow: hidden;
        }

        .chats-panel::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(0, 194, 255, 0.05));
            z-index: -1;
        }

        .search-container {
            padding: 25px 20px 15px;
            position: relative;
        }

        .search-box {
            background-color: rgba(26, 26, 53, 0.7);
            border-radius: 15px;
            padding: 12px 20px;
            display: flex;
            align-items: center;
            border: 1px solid rgba(100, 100, 200, 0.2);
            box-shadow: 0 0 10px rgba(0, 194, 255, 0.1);
        }

        .search-box:hover {
            box-shadow: 0 0 15px rgba(0, 194, 255, 0.3);
            border: 1px solid rgba(0, 194, 255, 0.3);
        }

        .search-box i {
            color: var(--neon-blue);
            margin-right: 10px;
            text-shadow: 0 0 5px var(--neon-blue);
        }

        .search-box input {
            background: transparent;
            border: none;
            color: var(--text-primary);
            width: 100%;
            font-size: 15px;
            outline: none;
        }

        .search-box input::placeholder {
            color: var(--text-secondary);
        }

        .chats-header {
            display: flex;
            justify-content: space-between;
            padding: 0 20px 20px;
            align-items: center;
        }

        .chats-header h2 {
            font-size: 24px;
            font-weight: 600;
            background: linear-gradient(90deg, var(--neon-blue), var(--neon-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 10px rgba(0, 194, 255, 0.3);
        }

        .new-chat-btn {
            background: linear-gradient(135deg, var(--neon-blue), var(--neon-purple));
            width: 40px;
            height: 40px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 0 10px rgba(185, 103, 255, 0.3);
        }

        .new-chat-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 0 15px var(--neon-purple);
        }

        .chats-list {
            flex: 1;
            overflow-y: auto;
            padding: 0 10px;
        }

        .chats-list::-webkit-scrollbar {
            width: 6px;
        }

        .chats-list::-webkit-scrollbar-track {
            background: rgba(10, 10, 20, 0.3);
            border-radius: 3px;
        }

        .chats-list::-webkit-scrollbar-thumb {
            background: linear-gradient(var(--neon-blue), var(--neon-purple));
            border-radius: 3px;
        }

        .chat-item {
            display: flex;
            padding: 18px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            border-radius: 15px;
            margin: 8px 0;
            background: rgba(26, 26, 53, 0.5);
            border: 1px solid rgba(100, 100, 200, 0.1);
        }

        .chat-item:hover {
            background: rgba(40, 40, 80, 0.6);
            box-shadow: 0 0 15px rgba(0, 194, 255, 0.2);
            border: 1px solid rgba(0, 194, 255, 0.2);
            transform: translateY(-2px);
        }

        .chat-item.active {
            background: linear-gradient(90deg, rgba(0, 194, 255, 0.2), rgba(185, 103, 255, 0.2));
            box-shadow: 0 0 20px rgba(0, 194, 255, 0.3);
            border: 1px solid rgba(0, 194, 255, 0.3);
        }

        .chat-avatar {
            width: 55px;
            height: 55px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            font-weight: bold;
            margin-right: 15px;
            position: relative;
            background: linear-gradient(135deg, var(--neon-blue), var(--neon-purple));
            box-shadow: 0 0 10px var(--neon-blue);
            color: white;
            background-size: cover;
            background-position: center;
        }

        .online-dot {
            position: absolute;
            width: 14px;
            height: 14px;
            background-color: var(--online);
            border-radius: 50%;
            border: 2px solid var(--surface);
            bottom: 0;
            right: 0;
            box-shadow: 0 0 8px var(--online);
        }

        .chat-info {
            flex: 1;
            min-width: 0;
        }

        .chat-top {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .chat-name {
            font-weight: 600;
            font-size: 17px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            color: var(--text-primary);
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.3);
        }

        .chat-time {
            color: var(--neon-blue);
            font-size: 13px;
            font-weight: 500;
        }

        .chat-preview {
            display: flex;
            align-items: center;
        }

        .chat-message {
            color: var(--text-secondary);
            font-size: 14px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            flex: 1;
        }

        .unread-count {
            background: linear-gradient(135deg, var(--neon-pink), var(--neon-purple));
            color: white;
            font-size: 12px;
            min-width: 24px;
            height: 24px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: 8px;
            font-weight: bold;
            box-shadow: 0 0 8px rgba(255, 42, 109, 0.5);
        }

        /* Область сообщений */
        .chat-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: 
                radial-gradient(circle at 80% 20%, rgba(0, 194, 255, 0.05) 0%, transparent 40%),
                radial-gradient(circle at 20% 80%, rgba(255, 42, 109, 0.05) 0%, transparent 40%),
                rgba(18, 18, 37, 0.9);
            position: relative;
            overflow: hidden;
        }

        .chat-area::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                linear-gradient(45deg, transparent, rgba(0, 194, 255, 0.03)),
                linear-gradient(-45deg, transparent, rgba(255, 42, 109, 0.03));
            z-index: -1;
        }

        .chat-header {
            padding: 20px 25px;
            display: flex;
            align-items: center;
            border-bottom: 1px solid rgba(100, 100, 200, 0.1);
            background: rgba(18, 18, 37, 0.8);
            backdrop-filter: blur(10px);
        }

        .chat-title {
            margin-left: 15px;
            flex: 1;
        }

        .chat-title h3 {
            font-size: 20px;
            font-weight: 600;
            color: var(--text-primary);
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.3);
        }

        .chat-title p {
            color: var(--neon-blue);
            font-size: 14px;
            margin-top: 5px;
            font-weight: 500;
            text-shadow: 0 0 5px rgba(0, 194, 255, 0.3);
        }

        .header-actions {
            display: flex;
        }

        .header-icon {
            width: 40px;
            height: 40px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: 12px;
            cursor: pointer;
            color: var(--text-secondary);
            transition: all 0.3s ease;
            background: rgba(26, 26, 53, 0.5);
            border: 1px solid rgba(100, 100, 200, 0.1);
        }

        .header-icon:hover {
            background: linear-gradient(135deg, rgba(0, 194, 255, 0.2), rgba(255, 42, 109, 0.2));
            color: white;
            box-shadow: 0 0 15px rgba(0, 194, 255, 0.3);
            transform: scale(1.05);
        }

        .header-icon:nth-child(1):hover {
            color: var(--neon-blue);
            text-shadow: 0 0 8px var(--neon-blue);
        }

        .header-icon:nth-child(2):hover {
            color: var(--neon-pink);
            text-shadow: 0 0 8px var(--neon-pink);
        }

        .header-icon:nth-child(3):hover {
            color: var(--accent);
            text-shadow: 0 0 8px var(--accent);
        }

        .messages-container {
            flex: 1;
            padding: 25px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .messages-container::-webkit-scrollbar {
            width: 6px;
        }

        .messages-container::-webkit-scrollbar-track {
            background: rgba(10, 10, 20, 0.3);
            border-radius: 3px;
        }

        .messages-container::-webkit-scrollbar-thumb {
            background: linear-gradient(var(--neon-blue), var(--neon-purple));
            border-radius: 3px;
        }

        .message {
            max-width: 70%;
            padding: 15px 20px;
            margin-bottom: 20px;
            position: relative;
            animation: fadeIn 0.4s ease;
            border-radius: 20px;
            backdrop-filter: blur(5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .incoming {
            align-self: flex-start;
            background: rgba(40, 40, 80, 0.6);
            border-bottom-left-radius: 5px;
            border: 1px solid rgba(100, 100, 200, 0.2);
        }

        .outgoing {
            align-self: flex-end;
            background: linear-gradient(135deg, var(--neon-blue), var(--neon-purple));
            border-bottom-right-radius: 5px;
            color: white;
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
        }

        .message-time {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
            text-align: right;
            margin-top: 8px;
        }

        .typing-indicator {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            background: rgba(40, 40, 80, 0.6);
            border-radius: 25px;
            align-self: flex-start;
            margin-top: 10px;
            border: 1px solid rgba(100, 100, 200, 0.2);
        }

        .typing-indicator span {
            height: 10px;
            width: 10px;
            background-color: var(--neon-blue);
            border-radius: 50%;
            display: inline-block;
            margin: 0 3px;
            animation: typing 1.4s infinite ease-in-out;
            box-shadow: 0 0 5px var(--neon-blue);
        }

        .typing-indicator span:nth-child(1) { animation-delay: 0s; }
        .typing-indicator span:nth-child(2) { animation-delay: 0.2s; }
        .typing-indicator span:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-6px); }
        }

        .input-area {
            padding: 20px 25px;
            display: flex;
            align-items: center;
            background: rgba(18, 18, 37, 0.8);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(100, 100, 200, 0.1);
            flex-wrap: wrap;
            position: relative;
        }

        .input-tools {
            display: flex;
            margin-right: 15px;
        }

        .input-tool {
            width: 45px;
            height: 45px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 6px;
            cursor: pointer;
            color: var(--text-secondary);
            transition: all 0.3s ease;
            background: rgba(26, 26, 53, 0.5);
            border: 1px solid rgba(100, 100, 200, 0.1);
        }

        .input-tool:hover {
            background: linear-gradient(135deg, rgba(0, 194, 255, 0.2), rgba(255, 42, 109, 0.2));
            color: white;
            box-shadow: 0 0 15px rgba(0, 194, 255, 0.3);
            transform: scale(1.05);
        }

        .message-input {
            flex: 1;
            background: rgba(26, 26, 53, 0.7);
            border-radius: 25px;
            padding: 14px 22px;
            display: flex;
            align-items: center;
            border: 1px solid rgba(100, 100, 200, 0.2);
            transition: all 0.3s ease;
        }

        .message-input:hover {
            box-shadow: 0 0 15px rgba(0, 194, 255, 0.2);
            border: 1px solid rgba(0, 194, 255, 0.3);
        }

        .message-input:focus-within {
            box-shadow: 0 0 20px rgba(0, 194, 255, 0.4);
            border: 1px solid var(--neon-blue);
        }

        .message-input input {
            background: transparent;
            border: none;
            color: var(--text-primary);
            width: 100%;
            font-size: 16px;
            outline: none;
        }

        .message-input input::placeholder {
            color: var(--text-secondary);
        }

        .send-btn {
            width: 50px;
            height: 50px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--neon-blue), var(--neon-purple));
            cursor: pointer;
            transition: all 0.3s ease;
            margin-left: 15px;
            box-shadow: 0 0 15px rgba(185, 103, 255, 0.4);
        }

        .send-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 25px var(--neon-purple);
        }

        /* Модальные окна */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: linear-gradient(135deg, #1a1a35, #121225);
            width: 90%;
            max-width: 500px;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 0 40px rgba(0, 194, 255, 0.4);
            border: 1px solid rgba(100, 100, 200, 0.3);
            position: relative;
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 24px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: color 0.3s;
        }

        .close-modal:hover {
            color: var(--neon-pink);
        }

        .modal-title {
            font-size: 24px;
            margin-bottom: 25px;
            text-align: center;
            background: linear-gradient(90deg, var(--neon-blue), var(--neon-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Улучшенный редактор профиля */
        .profile-editor {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .profile-header {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .profile-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            margin-bottom: 15px;
            background: linear-gradient(135deg, var(--neon-blue), var(--neon-purple));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 50px;
            position: relative;
            overflow: hidden;
            background-size: cover;
            background-position: center;
            cursor: pointer;
            border: 3px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 0 15px var(--neon-blue);
        }
        
        .change-avatar {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.7);
            padding: 8px;
            text-align: center;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 14px;
        }
        
        .profile-avatar:hover .change-avatar {
            opacity: 1;
        }
        
        .tabs {
            display: flex;
            background: rgba(26, 26, 53, 0.7);
            border-radius: 15px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        
        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }
        
        .tab.active {
            background: linear-gradient(135deg, var(--neon-blue), var(--neon-purple));
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--neon-blue);
            font-weight: 500;
        }
        
        .form-group input, .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            background: rgba(26, 26, 53, 0.7);
            border: 1px solid rgba(100, 100, 200, 0.3);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 16px;
            outline: none;
            transition: all 0.3s;
        }
        
        .form-group input:focus, .form-group textarea:focus {
            border-color: var(--neon-blue);
            box-shadow: 0 0 15px rgba(0, 194, 255, 0.3);
        }
        
        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .stats-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }
        
        .stat-card {
            background: rgba(26, 26, 53, 0.7);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            border: 1px solid rgba(100, 100, 200, 0.2);
        }
        
        .stat-value {
            font-size: 28px;
            font-weight: bold;
            background: linear-gradient(90deg, var(--neon-blue), var(--neon-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: var(--text-secondary);
            font-size: 14px;
        }
        
        .save-btn {
            background: linear-gradient(135deg, var(--neon-blue), var(--neon-purple));
            color: white;
            border: none;
            border-radius: 12px;
            padding: 15px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
            margin-top: 10px;
            box-shadow: 0 0 15px rgba(185, 103, 255, 0.4);
        }
        
        .save-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 0 25px var(--neon-purple);
        }

        /* Уведомления */
        .notification {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 15px 25px;
            border-radius: 12px;
            color: white;
            font-weight: 500;
            z-index: 1001;
            opacity: 0;
            transition: opacity 0.3s;
            backdrop-filter: blur(10px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .notification.show {
            opacity: 1;
        }
        
        .notification.success {
            background: rgba(0, 200, 83, 0.8);
            border: 1px solid rgba(0, 200, 83, 0.5);
        }
        
        .notification.error {
            background: rgba(255, 87, 34, 0.8);
            border: 1px solid rgba(255, 87, 34, 0.5);
        }

        /* Форма создания чата */
        .chat-type-selector {
            display: flex;
            margin-bottom: 25px;
            gap: 10px;
        }
        
        .chat-type {
            flex: 1;
            padding: 15px 10px;
            text-align: center;
            border-radius: 12px;
            cursor: pointer;
            background: rgba(26, 26, 53, 0.7);
            border: 1px solid rgba(100, 100, 200, 0.2);
            transition: all 0.3s;
        }
        
        .chat-type.active {
            background: linear-gradient(135deg, var(--neon-blue), var(--neon-purple));
            box-shadow: 0 0 15px rgba(0, 194, 255, 0.3);
            border: 1px solid rgba(0, 194, 255, 0.3);
        }
        
        .chat-type i {
            font-size: 24px;
            margin-bottom: 10px;
            display: block;
        }
        
        .chat-type:hover {
            transform: translateY(-3px);
        }
        
        .chat-type-description {
            font-size: 13px;
            margin-top: 8px;
            color: var(--text-secondary);
        }
        
        .participant-list {
            max-height: 200px;
            overflow-y: auto;
            background: rgba(26, 26, 53, 0.5);
            border-radius: 12px;
            padding: 10px;
            margin: 15px 0;
            border: 1px solid rgba(100, 100, 200, 0.2);
        }
        
        .participant-item {
            display: flex;
            align-items: center;
            padding: 10px;
            border-radius: 8px;
            transition: background 0.3s;
        }
        
        .participant-item:hover {
            background: rgba(40, 40, 80, 0.6);
        }
        
        .participant-item input {
            margin-right: 10px;
        }
        
        .participant-avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--neon-pink), var(--neon-purple));
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-size: 14px;
            font-weight: bold;
        }

        /* Адаптивность */
        @media (max-width: 900px) {
            .chats-panel {
                width: 300px;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 70px;
            }
            .chats-panel {
                width: 80px;
            }
            .chats-header h2, .search-container, .chat-info {
                display: none;
            }
            .chat-item {
                justify-content: center;
                padding: 15px;
            }
            .chat-avatar {
                margin-right: 0;
            }
        }

        /* Стили для ракеты-подарка */
        #rocket-gift {
            display: none;
            position: fixed;
            bottom: 20px;
            right: 20px;
            font-size: 40px;
            color: var(--neon-pink);
            text-shadow: 0 0 10px var(--neon-pink), 0 0 20px var(--neon-pink);
            z-index: 1000;
            transition: all 2s ease-in-out;
        }
        
        /* Стили для графика активности */
        #activity-graph {
            height: 150px;
            background: rgba(26, 26, 53, 0.5);
            border-radius: 12px;
            display: flex;
            align-items: flex-end;
            padding: 10px;
            gap: 5px;
            margin-top: 10px;
        }
        
        /* Стили для реакций */
        .message-reactions {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-top: 10px;
            justify-content: flex-start;
        }
        
        .reaction {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 4px 8px;
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid transparent;
        }
        
        .reaction:hover {
            background: rgba(0, 194, 255, 0.2);
            border: 1px solid var(--neon-blue);
        }
        
        .reaction.active {
            background: rgba(0, 194, 255, 0.3);
            border: 1px solid var(--neon-blue);
        }
        
        .reaction-emoji {
            font-size: 16px;
        }
        
        .reaction-count {
            font-weight: bold;
        }
        
        .add-reaction-btn {
            width: 26px;
            height: 26px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }
        
        .add-reaction-btn:hover {
            background: var(--neon-blue);
            color: white;
            transform: scale(1.1);
        }
        
        /* Панель выбора реакций */
        .reactions-panel {
            position: absolute;
            bottom: 100%;
            left: 0;
            background: var(--surface-light);
            border-radius: 20px;
            padding: 10px;
            display: flex;
            gap: 8px;
            z-index: 50;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            border: 1px solid rgba(100,100,200,0.2);
            display: none;
        }
        
        .reactions-panel.active {
            display: flex;
        }
        
        .reaction-option {
            font-size: 24px;
            cursor: pointer;
            transition: transform 0.2s;
            padding: 5px;
            border-radius: 8px;
        }
        
        .reaction-option:hover {
            transform: scale(1.2);
            background: rgba(255,255,255,0.1);
        }
        
        /* Панель стикеров */
        .stickers-panel {
            position: absolute;
            bottom: 100%;
            left: 0;
            width: 100%;
            background: var(--surface-light);
            border-radius: 20px;
            padding: 15px;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            z-index: 50;
            box-shadow: 0 5px 25px rgba(0,0,0,0.4);
            border: 1px solid rgba(100,100,200,0.2);
            max-height: 300px;
            overflow-y: auto;
            display: none;
        }
        
        .stickers-panel.active {
            display: grid;
        }
        
        .sticker {
            width: 100%;
            aspect-ratio: 1;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            cursor: pointer;
            transition: transform 0.2s;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
        }
        
        .sticker:hover {
            transform: scale(1.1);
            background-color: rgba(255,255,255,0.1);
        }
        
        .sticker-category {
            grid-column: span 4;
            font-weight: bold;
            color: var(--neon-blue);
            margin-top: 10px;
            padding-bottom: 5px;
            border-bottom: 1px solid rgba(100,100,200,0.2);
        }
        
        /* Индикатор новой реакции */
        @keyframes pulse-reaction {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        .new-reaction {
            animation: pulse-reaction 0.5s ease-in-out;
        }
    </style>
</head>
<body>
    <!-- Иконка подарка -->
    <div class="rocket-gift" id="rocket-gift">
        <i class="fas fa-gift"></i>
    </div>

    <div class="app-container">
        <!-- Боковая панель навигации -->
        <div class="sidebar">
            <div class="logo">
                <i class="fas fa-comment-dots"></i>
            </div>
            <div class="nav-icon active">
                <i class="fas fa-comments"></i>
            </div>
            <div class="nav-icon">
                <i class="fas fa-user-friends"></i>
            </div>
            <div class="nav-icon">
                <i class="fas fa-bookmark"></i>
            </div>
            <div class="nav-icon" id="settings-btn">
                <i class="fas fa-cog"></i>
            </div>
            <div class="nav-icon" style="margin-top: auto;">
                <i class="fas fa-moon"></i>
            </div>
            <div class="nav-icon" id="profile-btn">
                <i class="fas fa-user"></i>
            </div>
        </div>

        <!-- Панель списка чатов -->
        <div class="chats-panel">
            <div class="search-container">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Поиск..." id="chat-search">
                </div>
            </div>

            <div class="chats-header">
                <h2>Мои чаты</h2>
                <div class="new-chat-btn" id="create-channel-btn">
                    <i class="fas fa-plus"></i>
                </div>
            </div>

            <div class="chats-list" id="chats-list">
                <!-- Чат 1 -->
                <div class="chat-item active">
                    <div class="chat-avatar" style="background: linear-gradient(135deg, var(--neon-pink), var(--neon-purple));">
                        <span>А</span>
                        <div class="online-dot"></div>
                    </div>
                    <div class="chat-info">
                        <div class="chat-top">
                            <div class="chat-name">Анна Петрова</div>
                            <div class="chat-time">12:45</div>
                        </div>
                        <div class="chat-preview">
                            <div class="chat-message">Привет! Как твои дела?</div>
                            <div class="unread-count">3</div>
                        </div>
                    </div>
                </div>

                <!-- Чат 2 -->
                <div class="chat-item">
                    <div class="chat-avatar" style="background: linear-gradient(135deg, var(--accent), var(--neon-blue));">
                        <span>К</span>
                    </div>
                    <div class="chat-info">
                        <div class="chat-top">
                            <div class="chat-name">Кино клуб</div>
                            <div class="chat-time">11:20</div>
                        </div>
                        <div class="chat-preview">
                            <div class="chat-message">Елена: Предлагаю посмотреть новый фильм...</div>
                            <div class="unread-count">12</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Область сообщений -->
        <div class="chat-area">
            <div class="chat-header">
                <div class="chat-avatar" style="background: linear-gradient(135deg, var(--neon-pink), var(--neon-purple));">
                    <span>А</span>
                    <div class="online-dot"></div>
                </div>
                <div class="chat-title">
                    <h3>Анна Петрова</h3>
                    <p>online</p>
                </div>
                <div class="header-actions">
                    <div class="header-icon">
                        <i class="fas fa-phone-alt"></i>
                    </div>
                    <div class="header-icon">
                        <i class="fas fa-video"></i>
                    </div>
                    <div class="header-icon">
                        <i class="fas fa-info-circle"></i>
                    </div>
                </div>
            </div>

            <div class="messages-container">
                <!-- Сообщение с подсказкой о промокоде -->
                <div class="message incoming">
                    <div style="text-align: center; padding: 10px;">
                        <i class="fas fa-gift" style="color: var(--neon-pink); font-size: 24px; margin-bottom: 10px;"></i>
                        <p>Введите промокод <strong>Milli</strong> для получения уникального подарка-ракеты!</p>
                    </div>
                    <div class="message-time">Системное сообщение</div>
                    
                    <!-- Реакции -->
                    <div class="message-reactions">
                        <div class="reaction" data-emoji="👍">
                            <span class="reaction-emoji">👍</span>
                            <span class="reaction-count">3</span>
                        </div>
                        <div class="reaction" data-emoji="❤️">
                            <span class="reaction-emoji">❤️</span>
                            <span class="reaction-count">5</span>
                        </div>
                        <div class="add-reaction-btn">+</div>
                    </div>
                    
                    <!-- Панель выбора реакций -->
                    <div class="reactions-panel">
                        <div class="reaction-option">👍</div>
                        <div class="reaction-option">👎</div>
                        <div class="reaction-option">❤️</div>
                        <div class="reaction-option">😂</div>
                        <div class="reaction-option">😮</div>
                        <div class="reaction-option">😢</div>
                        <div class="reaction-option">👏</div>
                    </div>
                </div>

                <!-- Входящее сообщение -->
                <div class="message incoming">
                    Привет! Как твои дела? Что нового?
                    <div class="message-time">12:43</div>
                    
                    <!-- Реакции -->
                    <div class="message-reactions">
                        <div class="reaction active" data-emoji="👍">
                            <span class="reaction-emoji">👍</span>
                            <span class="reaction-count">1</span>
                        </div>
                        <div class="add-reaction-btn">+</div>
                    </div>
                    
                    <!-- Панель выбора реакций -->
                    <div class="reactions-panel">
                        <div class="reaction-option">👍</div>
                        <div class="reaction-option">👎</div>
                        <div class="reaction-option">❤️</div>
                        <div class="reaction-option">😂</div>
                        <div class="reaction-option">😮</div>
                        <div class="reaction-option">😢</div>
                        <div class="reaction-option">👏</div>
                    </div>
                </div>

                <!-- Индикатор набора сообщения -->
                <div class="typing-indicator">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>

            <div class="input-area">
                <div class="input-tools">
                    <div class="input-tool" id="sticker-btn">
                        <i class="far fa-smile"></i>
                    </div>
                    <div class="input-tool">
                        <i class="fas fa-paperclip"></i>
                    </div>
                    <div class="input-tool">
                        <i class="fas fa-image"></i>
                    </div>
                </div>
                <div class="message-input">
                    <input type="text" placeholder="Напишите сообщение..." id="message-input">
                </div>
                <div class="send-btn" id="send-btn">
                    <i class="fas fa-paper-plane"></i>
                </div>
                
                <!-- Панель стикеров -->
                <div class="stickers-panel" id="stickers-panel">
                    <div class="sticker-category">Популярные</div>
                    <div class="sticker">👍</div>
                    <div class="sticker">❤️</div>
                    <div class="sticker">😂</div>
                    <div class="sticker">😍</div>
                    
                    <div class="sticker-category">Эмоции</div>
                    <div class="sticker">😀</div>
                    <div class="sticker">😎</div>
                    <div class="sticker">🥺</div>
                    <div class="sticker">😡</div>
                    
                    <div class="sticker-category">Животные</div>
                    <div class="sticker">🐶</div>
                    <div class="sticker">🐱</div>
                    <div class="sticker">🐼</div>
                    <div class="sticker">🦊</div>
                    
                    <div class="sticker-category">Еда</div>
                    <div class="sticker">🍕</div>
                    <div class="sticker">🍔</div>
                    <div class="sticker">🍦</div>
                    <div class="sticker">🍩</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно профиля -->
    <div class="modal" id="profile-modal">
        <div class="modal-content">
            <span class="close-modal" id="close-profile-modal">&times;</span>
            <h2 class="modal-title">Редактор профиля</h2>
            
            <div class="profile-editor">
                <div class="profile-header">
                    <div class="profile-avatar" id="profile-avatar">
                        <span>U</span>
                        <div class="change-avatar">Изменить аватар</div>
                    </div>
                    <h3 id="profile-name">Ваше Имя</h3>
                    <p id="profile-status">Статус не установлен</p>
                </div>
                
                <div class="tabs">
                    <div class="tab active" data-tab="info">Основная информация</div>
                    <div class="tab" data-tab="appearance">Внешний вид</div>
                    <div class="tab" data-tab="stats">Статистика</div>
                </div>
                
                <!-- Вкладка основной информации -->
                <div class="tab-content active" id="info-tab">
                    <div class="form-group">
                        <label for="name">Имя</label>
                        <input type="text" id="name" value="Ваше Имя">
                    </div>
                    
                    <div class="form-group">
                        <label for="username">Имя пользователя</label>
                        <input type="text" id="username" value="@username">
                    </div>
                    
                    <div class="form-group">
                        <label for="status">Статус</label>
                        <input type="text" id="status" placeholder="Чем вы сейчас занимаетесь?">
                    </div>
                    
                    <div class="form-group">
                        <label for="bio">О себе</label>
                        <textarea id="bio" placeholder="Расскажите о себе..."></textarea>
                    </div>
                </div>
                
                <!-- Вкладка внешнего вида -->
                <div class="tab-content" id="appearance-tab">
                    <div class="form-group">
                        <label>Тема оформления</label>
                        <div style="display: flex; gap: 15px; margin-top: 10px;">
                            <div class="theme-option" data-theme="neon">
                                <i class="fas fa-palette" style="color: var(--neon-blue);"></i> Неоновая
                            </div>
                            <div class="theme-option" data-theme="dark">
                                <i class="fas fa-moon" style="color: var(--neon-purple);"></i> Темная
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Цвет акцента</label>
                        <div style="display: flex; gap: 10px; margin-top: 10px; flex-wrap: wrap;">
                            <div class="color-option" style="background: var(--neon-blue);" data-color="blue"></div>
                            <div class="color-option" style="background: var(--neon-pink);" data-color="pink"></div>
                            <div class="color-option" style="background: var(--neon-green);" data-color="green"></div>
                            <div class="color-option" style="background: var(--neon-purple);" data-color="purple"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Вкладка статистики -->
                <div class="tab-content" id="stats-tab">
                    <div class="stats-container">
                        <div class="stat-card">
                            <div class="stat-value" id="sent-messages">0</div>
                            <div class="stat-label">Отправленных сообщений</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="online-friends">0</div>
                            <div class="stat-label">Друзей онлайн</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="gifts-received">0</div>
                            <div class="stat-label">Полученных подарков</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="days-active">0</div>
                            <div class="stat-label">Дней в системе</div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Ваша активность</label>
                        <div id="activity-graph">
                            <!-- График активности будет генерироваться динамически -->
                        </div>
                    </div>
                </div>
                
                <button class="save-btn" id="save-profile">Сохранить изменения</button>
            </div>
        </div>
    </div>
    
    <!-- Модальное окно создания чата -->
    <div class="modal" id="create-chat-modal">
        <div class="modal-content">
            <span class="close-modal" id="close-create-chat-modal">&times;</span>
            <h2 class="modal-title">Создать новый чат</h2>
            
            <div class="chat-type-selector">
                <div class="chat-type active" data-type="private">
                    <i class="fas fa-user-friends"></i>
                    Личный чат
                    <div class="chat-type-description">Чат с одним человеком</div>
                </div>
                <div class="chat-type" data-type="group">
                    <i class="fas fa-users"></i>
                    Групповой чат
                    <div class="chat-type-description">Чат с несколькими людьми</div>
                </div>
                <div class="chat-type" data-type="channel">
                    <i class="fas fa-bullhorn"></i>
                    Канал
                    <div class="chat-type-description">Публичный канал</div>
                </div>
            </div>
            
            <div class="form-group">
                <label for="chat-name">Название чата</label>
                <input type="text" id="chat-name" placeholder="Введите название...">
            </div>
            
            <div class="form-group" id="chat-description-container" style="display: none;">
                <label for="chat-description">Описание чата</label>
                <input type="text" id="chat-description" placeholder="Введите описание...">
            </div>
            
            <div class="form-group" id="participants-container" style="display: none;">
                <label>Выберите участников</label>
                <div class="participant-list" id="participant-list">
                    <div class="participant-item">
                        <input type="checkbox" id="user1">
                        <div class="participant-avatar">А</div>
                        <label for="user1">Анна Петрова</label>
                    </div>
                    <div class="participant-item">
                        <input type="checkbox" id="user2">
                        <div class="participant-avatar">И</div>
                        <label for="user2">Иван Сидоров</label>
                    </div>
                    <div class="participant-item">
                        <input type="checkbox" id="user3">
                        <div class="participant-avatar">М</div>
                        <label for="user3">Мария Иванова</label>
                    </div>
                    <div class="participant-item">
                        <input type="checkbox" id="user4">
                        <div class="participant-avatar">П</div>
                        <label for="user4">Петр Кузнецов</label>
                    </div>
                    <div class="participant-item">
                        <input type="checkbox" id="user5">
                        <div class="participant-avatar">О</div>
                        <label for="user5">Ольга Смирнова</label>
                    </div>
                </div>
            </div>
            
            <button class="save-btn" id="create-chat-btn">Создать чат</button>
        </div>
    </div>
    
    <!-- Уведомление -->
    <div class="notification" id="notification">Профиль успешно обновлен!</div>
    
    <input type="file" id="avatar-upload" accept="image/*" style="display: none;">

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Статистика пользователя
            const userStats = {
                registrationDate: new Date(2024, 0, 1), // Дата регистрации (1 января 2024)
                sentMessages: 0,
                receivedGifts: 0,
                onlineFriends: 0,
                // Активность по дням недели
                activity: {
                    mon: 20,
                    tue: 45,
                    wed: 70,
                    thu: 90,
                    fri: 60,
                    sat: 30,
                    sun: 10
                }
            };
            
            // Обновление статистики при загрузке
            function updateStats() {
                // Рассчитываем количество дней в системе
                const today = new Date();
                const diffTime = Math.abs(today - userStats.registrationDate);
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)); 
                
                // Обновляем DOM
                document.getElementById('sent-messages').textContent = userStats.sentMessages;
                document.getElementById('gifts-received').textContent = userStats.receivedGifts;
                document.getElementById('days-active').textContent = diffDays;
                document.getElementById('online-friends').textContent = userStats.onlineFriends;
                
                // Обновляем график активности
                updateActivityGraph();
            }
            
            // Обновление графика активности
            function updateActivityGraph() {
                const graphContainer = document.getElementById('activity-graph');
                graphContainer.innerHTML = '';
                
                const days = ['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat'];
                const dayNames = ['Вс', 'Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб'];
                const colors = [
                    'var(--neon-blue)',
                    'var(--neon-pink)',
                    'var(--neon-purple)',
                    'var(--neon-green)',
                    'var(--neon-yellow)',
                    'var(--neon-blue)',
                    'var(--neon-pink)'
                ];
                
                days.forEach((day, index) => {
                    const height = userStats.activity[day] + '%';
                    const bar = document.createElement('div');
                    bar.style.flex = '1';
                    bar.style.background = colors[index];
                    bar.style.height = height;
                    bar.style.borderRadius = '5px';
                    bar.style.transition = 'height 0.5s ease';
                    bar.style.position = 'relative';
                    
                    // Добавляем подпись дня недели
                    const label = document.createElement('div');
                    label.textContent = dayNames[index];
                    label.style.position = 'absolute';
                    label.style.bottom = '-25px';
                    label.style.left = '0';
                    label.style.right = '0';
                    label.style.textAlign = 'center';
                    label.style.fontSize = '12px';
                    label.style.color = 'var(--text-secondary)';
                    
                    bar.appendChild(label);
                    bar.title = `Активность: ${userStats.activity[day]}%`;
                    graphContainer.appendChild(bar);
                });
            }
            
            // Элементы интерфейса
            const profileBtn = document.getElementById('profile-btn');
            const profileModal = document.getElementById('profile-modal');
            const closeProfileModal = document.getElementById('close-profile-modal');
            const saveProfileBtn = document.getElementById('save-profile');
            const profileAvatar = document.getElementById('profile-avatar');
            const avatarUpload = document.getElementById('avatar-upload');
            const nameInput = document.getElementById('name');
            const usernameInput = document.getElementById('username');
            const statusInput = document.getElementById('status');
            const bioInput = document.getElementById('bio');
            const profileName = document.getElementById('profile-name');
            const profileStatus = document.getElementById('profile-status');
            const notification = document.getElementById('notification');
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            const themeOptions = document.querySelectorAll('.theme-option');
            const createChatBtn = document.getElementById('create-channel-btn');
            const createChatModal = document.getElementById('create-chat-modal');
            const closeCreateChatModal = document.getElementById('close-create-chat-modal');
            const createChatFormBtn = document.getElementById('create-chat-btn');
            const chatTypes = document.querySelectorAll('.chat-type');
            const chatNameInput = document.getElementById('chat-name');
            const chatDescriptionContainer = document.getElementById('chat-description-container');
            const participantsContainer = document.getElementById('participants-container');
            const chatsList = document.getElementById('chats-list');
            const stickerBtn = document.getElementById('sticker-btn');
            const stickersPanel = document.getElementById('stickers-panel');
            
            // Открытие модального окна профиля
            profileBtn.addEventListener('click', function() {
                profileModal.classList.add('active');
                updateStats(); // Обновляем статистику при открытии
            });
            
            // Закрытие модального окна
            closeProfileModal.addEventListener('click', function() {
                profileModal.classList.remove('active');
            });
            
            // Смена аватара
            profileAvatar.addEventListener('click', function() {
                avatarUpload.click();
            });
            
            avatarUpload.addEventListener('change', function(e) {
                if (e.target.files && e.target.files[0]) {
                    const reader = new FileReader();
                    
                    reader.onload = function(event) {
                        profileAvatar.style.backgroundImage = `url(${event.target.result})`;
                        profileAvatar.innerHTML = '<div class="change-avatar">Изменить аватар</div>';
                        showNotification('Аватар успешно обновлен!', 'success');
                    }
                    
                    reader.readAsDataURL(e.target.files[0]);
                }
            });
            
            // Переключение вкладок
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // Убираем активный класс у всех вкладок
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    
                    // Добавляем активный класс текущей вкладке
                    this.classList.add('active');
                    
                    // Показываем соответствующий контент
                    const tabId = this.dataset.tab;
                    document.getElementById(`${tabId}-tab`).classList.add('active');
                    
                    // При открытии вкладки статистики обновляем данные
                    if (tabId === 'stats') {
                        updateStats();
                    }
                });
            });
            
            // Выбор темы оформления
            themeOptions.forEach(option => {
                option.addEventListener('click', function() {
                    themeOptions.forEach(o => o.classList.remove('active'));
                    this.classList.add('active');
                    showNotification(`Тема "${this.textContent}" активирована!`, 'success');
                });
            });
            
            // Сохранение профиля
            saveProfileBtn.addEventListener('click', function() {
                // Обновляем данные профиля
                profileName.textContent = nameInput.value;
                
                if (statusInput.value) {
                    profileStatus.textContent = statusInput.value;
                } else {
                    profileStatus.textContent = "Статус не установлен";
                }
                
                // Показываем уведомление
                showNotification('Профиль успешно обновлен!', 'success');
                
                // Закрываем модальное окно через 1 секунду
                setTimeout(() => {
                    profileModal.classList.remove('active');
                }, 1000);
            });
            
            // Функция показа уведомления
            function showNotification(text, type) {
                notification.textContent = text;
                notification.className = `notification ${type}`;
                notification.classList.add('show');
                
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            }
            
            // Отправка сообщений
            const sendBtn = document.getElementById('send-btn');
            const messageInput = document.getElementById('message-input');
            
            sendBtn.addEventListener('click', sendMessage);
            messageInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });

            function sendMessage() {
                const message = messageInput.value.trim();
                
                if (message) {
                    // Увеличиваем счетчик сообщений
                    userStats.sentMessages++;
                    
                    // Обновляем активность
                    const today = new Date();
                    const dayOfWeek = ['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat'][today.getDay()];
                    userStats.activity[dayOfWeek] = Math.min(100, userStats.activity[dayOfWeek] + 5);
                    
                    const messagesContainer = document.querySelector('.messages-container');
                    const typingIndicator = document.querySelector('.typing-indicator');
                    
                    if (typingIndicator) {
                        typingIndicator.remove();
                    }
                    
                    const messageElement = document.createElement('div');
                    messageElement.className = 'message outgoing';
                    messageElement.innerHTML = `
                        ${message}
                        <div class="message-time">${getCurrentTime()}</div>
                        
                        <div class="message-reactions">
                            <div class="add-reaction-btn">+</div>
                        </div>
                        
                        <div class="reactions-panel">
                            <div class="reaction-option">👍</div>
                            <div class="reaction-option">👎</div>
                            <div class="reaction-option">❤️</div>
                            <div class="reaction-option">😂</div>
                            <div class="reaction-option">😮</div>
                            <div class="reaction-option">😢</div>
                            <div class="reaction-option">👏</div>
                        </div>
                    `;
                    
                    messagesContainer.appendChild(messageElement);
                    messageInput.value = '';
                    
                    // Прокрутка к последнему сообщению
                    messagesContainer.scrollTop = messagesContainer.scrollHeight;
                    
                    // Инициализация реакций для нового сообщения
                    initReactions(messageElement);
                    
                    // Проверка на промокод
                    if (message.toLowerCase() === "milli") {
                        // Активация подарка
                        userStats.receivedGifts++;
                        showNotification('Промокод активирован! Вы получили ракету-подарок!', 'success');
                        
                        // Анимация подарка
                        animateRocketGift();
                    }
                    
                    // Имитация ответа
                    setTimeout(() => {
                        const typing = document.createElement('div');
                        typing.className = 'typing-indicator';
                        typing.innerHTML = '<span></span><span></span><span></span>';
                        messagesContainer.appendChild(typing);
                        messagesContainer.scrollTop = messagesContainer.scrollHeight;
                        
                        setTimeout(() => {
                            typing.remove();
                            const replyElement = document.createElement('div');
                            replyElement.className = 'message incoming';
                            replyElement.innerHTML = `
                                Отличный вариант! Я как раз хотел предложить это кафе. Забронируем столик на 18:00?
                                <div class="message-time">${getCurrentTime()}</div>
                                
                                <div class="message-reactions">
                                    <div class="add-reaction-btn">+</div>
                                </div>
                                
                                <div class="reactions-panel">
                                    <div class="reaction-option">👍</div>
                                    <div class="reaction-option">👎</div>
                                    <div class="reaction-option">❤️</div>
                                    <div class="reaction-option">😂</div>
                                    <div class="reaction-option">😮</div>
                                    <div class="reaction-option">😢</div>
                                    <div class="reaction-option">👏</div>
                                </div>
                            `;
                            messagesContainer.appendChild(replyElement);
                            messagesContainer.scrollTop = messagesContainer.scrollHeight;
                            
                            // Инициализация реакций для ответа
                            initReactions(replyElement);
                        }, 2000);
                    }, 1000);
                }
            }

            // Анимация подарка-ракеты
            function animateRocketGift() {
                const gift = document.getElementById('rocket-gift');
                gift.style.display = 'block';
                gift.style.position = 'fixed';
                gift.style.bottom = '20px';
                gift.style.right = '20px';
                gift.style.fontSize = '40px';
                gift.style.color = '#ff00ff';
                gift.style.textShadow = '0 0 10px #ff00ff, 0 0 20px #ff00ff';
                gift.style.zIndex = '1000';
                gift.style.transition = 'all 2s ease-in-out';
                
                // Анимация полета
                setTimeout(() => {
                    gift.style.transform = 'translateY(-100vh) translateX(-50vw) rotate(45deg)';
                    gift.style.fontSize = '80px';
                    gift.style.opacity = '0';
                    
                    // Сброс после анимации
                    setTimeout(() => {
                        gift.style.display = 'none';
                        gift.style.transform = 'none';
                        gift.style.opacity = '1';
                        gift.style.fontSize = '40px';
                    }, 2000);
                }, 500);
            }

            function getCurrentTime() {
                const now = new Date();
                return `${now.getHours()}:${now.getMinutes().toString().padStart(2, '0')}`;
            }

            // Выбор чата
            document.querySelectorAll('.chat-item').forEach(item => {
                item.addEventListener('click', function() {
                    document.querySelectorAll('.chat-item').forEach(i => i.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Обновляем заголовок чата
                    const chatName = this.querySelector('.chat-name').textContent;
                    document.querySelector('.chat-title h3').textContent = chatName;
                    
                    // Обновляем количество друзей онлайн (случайное число)
                    userStats.onlineFriends = Math.floor(Math.random() * 100);
                    updateStats();
                });
            });
            
            // Функция создания чатов и каналов
            function setupChatCreation() {
                // Открытие модального окна создания чата
                createChatBtn.addEventListener('click', function() {
                    createChatModal.classList.add('active');
                    // Сброс формы
                    chatNameInput.value = '';
                    document.querySelectorAll('.chat-type').forEach(t => t.classList.remove('active'));
                    document.querySelector('.chat-type[data-type="private"]').classList.add('active');
                    chatDescriptionContainer.style.display = 'none';
                    participantsContainer.style.display = 'none';
                });
                
                // Закрытие модального окна создания чата
                closeCreateChatModal.addEventListener('click', function() {
                    createChatModal.classList.remove('active');
                });
                
                // Выбор типа чата
                chatTypes.forEach(type => {
                    type.addEventListener('click', function() {
                        chatTypes.forEach(t => t.classList.remove('active'));
                        this.classList.add('active');
                        
                        const chatType = this.dataset.type;
                        
                        // Показываем/скрываем дополнительные поля
                        if (chatType === 'private') {
                            chatDescriptionContainer.style.display = 'none';
                            participantsContainer.style.display = 'none';
                        } else if (chatType === 'group') {
                            chatDescriptionContainer.style.display = 'block';
                            participantsContainer.style.display = 'block';
                        } else if (chatType === 'channel') {
                            chatDescriptionContainer.style.display = 'block';
                            participantsContainer.style.display = 'none';
                        }
                    });
                });
                
                // Создание нового чата
                createChatFormBtn.addEventListener('click', function() {
                    const chatName = chatNameInput.value.trim();
                    const chatType = document.querySelector('.chat-type.active').dataset.type;
                    
                    if (!chatName) {
                        showNotification('Пожалуйста, введите название чата', 'error');
                        return;
                    }
                    
                    // Создаем новый чат
                    createNewChat(chatName, chatType);
                    
                    // Закрываем модальное окно
                    createChatModal.classList.remove('active');
                    
                    // Показываем уведомление
                    showNotification(`Чат "${chatName}" успешно создан!`, 'success');
                });
            }
            
            // Функция создания нового чата
            function createNewChat(name, type) {
                const chatItem = document.createElement('div');
                chatItem.className = 'chat-item';
                
                // Генерируем случайный градиент для аватара
                const gradients = [
                    `linear-gradient(135deg, var(--neon-pink), var(--neon-purple))`,
                    `linear-gradient(135deg, var(--accent), var(--neon-blue))`,
                    `linear-gradient(135deg, var(--neon-green), var(--neon-blue))`,
                    `linear-gradient(135deg, var(--neon-purple), var(--neon-pink))`,
                    `linear-gradient(135deg, var(--neon-yellow), var(--neon-pink))`
                ];
                
                const randomGradient = gradients[Math.floor(Math.random() * gradients.length)];
                
                // Определяем иконку для типа чата
                let icon = '';
                if (type === 'private') icon = '<i class="fas fa-user-friends"></i>';
                else if (type === 'group') icon = '<i class="fas fa-users"></i>';
                else if (type === 'channel') icon = '<i class="fas fa-bullhorn"></i>';
                
                // Создаем HTML для нового чата
                chatItem.innerHTML = `
                    <div class="chat-avatar" style="background: ${randomGradient}">
                        ${icon}
                    </div>
                    <div class="chat-info">
                        <div class="chat-top">
                            <div class="chat-name">${name}</div>
                            <div class="chat-time">${getCurrentTime()}</div>
                        </div>
                        <div class="chat-preview">
                            <div class="chat-message">Новый чат</div>
                            <div class="unread-count">1</div>
                        </div>
                    </div>
                `;
                
                // Добавляем обработчик выбора чата
                chatItem.addEventListener('click', function() {
                    document.querySelectorAll('.chat-item').forEach(i => i.classList.remove('active'));
                    this.classList.add('active');
                    document.querySelector('.chat-title h3').textContent = name;
                });
                
                // Добавляем новый чат в начало списка
                chatsList.insertBefore(chatItem, chatsList.firstChild);
            }
            
            // Инициализация функционала создания чатов
            setupChatCreation();
            
            // Инициализация статистики при загрузке
            updateStats();
            
            // Инициализация друзей онлайн
            userStats.onlineFriends = Math.floor(Math.random() * 100);
            
            // Инициализация реакций
            function initReactions(container) {
                const addReactionBtns = container.querySelectorAll('.add-reaction-btn');
                const reactionPanels = container.querySelectorAll('.reactions-panel');
                
                addReactionBtns.forEach((btn, index) => {
                    btn.addEventListener('click', function(e) {
                        e.stopPropagation();
                        const panel = reactionPanels[index];
                        
                        // Скрыть все панели реакций
                        document.querySelectorAll('.reactions-panel').forEach(p => {
                            if (p !== panel) p.classList.remove('active');
                        });
                        
                        panel.classList.toggle('active');
                    });
                });
                
                // Обработка выбора реакции
                container.querySelectorAll('.reaction-option').forEach(option => {
                    option.addEventListener('click', function() {
                        const emoji = this.textContent;
                        const reactionsContainer = this.closest('.message').querySelector('.message-reactions');
                        addReactionToContainer(reactionsContainer, emoji);
                        
                        // Скрыть панель после выбора
                        this.closest('.reactions-panel').classList.remove('active');
                    });
                });
                
                // Обработка существующих реакций
                container.querySelectorAll('.reaction').forEach(reaction => {
                    reaction.addEventListener('click', function() {
                        this.classList.toggle('active');
                        
                        const countElement = this.querySelector('.reaction-count');
                        let count = parseInt(countElement.textContent) || 0;
                        
                        if (this.classList.contains('active')) {
                            count++;
                        } else {
                            count = Math.max(0, count - 1);
                        }
                        
                        countElement.textContent = count > 0 ? count : '';
                        
                        // Анимация для новой реакции
                        if (count === 1) {
                            this.classList.add('new-reaction');
                            setTimeout(() => {
                                this.classList.remove('new-reaction');
                            }, 500);
                        }
                    });
                });
            }
            
            // Добавление реакции в контейнер
            function addReactionToContainer(container, emoji) {
                // Проверим, есть ли уже такая реакция
                let reactionElement = [...container.children].find(el => 
                    el.classList.contains('reaction') && 
                    el.dataset.emoji === emoji
                );
                
                if (reactionElement) {
                    // Если реакция уже есть, просто активируем
                    reactionElement.classList.add('active');
                    const countElement = reactionElement.querySelector('.reaction-count');
                    let count = parseInt(countElement.textContent) || 1;
                    countElement.textContent = count + 1;
                    
                    // Анимация
                    reactionElement.classList.add('new-reaction');
                    setTimeout(() => {
                        reactionElement.classList.remove('new-reaction');
                    }, 500);
                } else {
                    // Создаем новую реакцию
                    reactionElement = document.createElement('div');
                    reactionElement.className = 'reaction active new-reaction';
                    reactionElement.dataset.emoji = emoji;
                    reactionElement.innerHTML = `
                        <span class="reaction-emoji">${emoji}</span>
                        <span class="reaction-count">1</span>
                    `;
                    
                    // Вставляем перед кнопкой добавления
                    const addBtn = container.querySelector('.add-reaction-btn');
                    container.insertBefore(reactionElement, addBtn);
                    
                    // Инициализация обработчика клика
                    reactionElement.addEventListener('click', function() {
                        this.classList.toggle('active');
                        
                        const countElement = this.querySelector('.reaction-count');
                        let count = parseInt(countElement.textContent) || 0;
                        
                        if (this.classList.contains('active')) {
                            count++;
                        } else {
                            count = Math.max(0, count - 1);
                        }
                        
                        countElement.textContent = count > 0 ? count : '';
                        
                        // Удалить реакцию если счетчик 0
                        if (count === 0) {
                            this.remove();
                        }
                    });
                }
            }
            
            // Инициализация реакций для существующих сообщений
            document.querySelectorAll('.message').forEach(initReactions);
            
            // Обработчик клика вне панели реакций
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.reactions-panel') && 
                    !e.target.closest('.add-reaction-btn')) {
                    document.querySelectorAll('.reactions-panel').forEach(panel => {
                        panel.classList.remove('active');
                    });
                }
            });
            
            // Панель стикеров
            stickerBtn.addEventListener('click', function() {
                stickersPanel.classList.toggle('active');
            });
            
            // Выбор стикера
            stickersPanel.querySelectorAll('.sticker').forEach(sticker => {
                sticker.addEventListener('click', function() {
                    const stickerContent = this.textContent;
                    
                    // Создаем сообщение со стикером
                    const messagesContainer = document.querySelector('.messages-container');
                    const messageElement = document.createElement('div');
                    messageElement.className = 'message outgoing';
                    messageElement.innerHTML = `
                        <div style="font-size: 48px; text-align: center;">${stickerContent}</div>
                        <div class="message-time">${getCurrentTime()}</div>
                        
                        <div class="message-reactions">
                            <div class="add-reaction-btn">+</div>
                        </div>
                        
                        <div class="reactions-panel">
                            <div class="reaction-option">👍</div>
                            <div class="reaction-option">👎</div>
                            <div class="reaction-option">❤️</div>
                            <div class="reaction-option">😂</div>
                            <div class="reaction-option">😮</div>
                            <div class="reaction-option">😢</div>
                            <div class="reaction-option">👏</div>
                        </div>
                    `;
                    
                    messagesContainer.appendChild(messageElement);
                    messagesContainer.scrollTop = messagesContainer.scrollHeight;
                    
                    // Инициализация реакций для нового сообщения
                    initReactions(messageElement);
                    
                    // Скрыть панель стикеров
                    stickersPanel.classList.remove('active');
                });
            });
            
            // Клик вне панели стикеров
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.stickers-panel') && 
                    !e.target.closest('#sticker-btn')) {
                    stickersPanel.classList.remove('active');
                }
            });
        });
    </script>
</body>
</html>